<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <title>Å˜azenÃ­ bibliografickÃ½ch citacÃ­ </title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <h1>ğŸ“š SeÅ™azenÃ­ bibliografie podle ÄeskÃ© abecedy</h1>
    <p>
      VloÅ¾te seznam citacÃ­ (kaÅ¾dÃ¡ zaÄÃ­najÃ­cÃ­ napÅ™. <code>[1]</code>) a kliknÄ›te na tlaÄÃ­tko. 
      FormÃ¡tovÃ¡nÃ­ citacÃ­ zÅ¯stane zachovÃ¡no. ÄŒÃ­slovÃ¡nÃ­ bude automaticky pÅ™eÄÃ­slovÃ¡no.
    </p>

    <textarea id="input" placeholder="VloÅ¾te citace sem..."></textarea>

    <div class="buttons">
      <button onclick="sortCitations()">SeÅ™adit Äesky</button>
      <button onclick="copyOutput()">KopÃ­rovat vÃ½stup</button>
    </div>

    <textarea id="output" readonly placeholder="Zde bude vÃ½stup..."></textarea>
    <footer class="footer">
      ğŸ‘¨â€ğŸ³ UvaÅ™il <a href="https://github.com/the-maty" target="_blank" rel="noopener">MaTy</a> Â© 2025 
  </footer>
  </div>

  <script>
    function normalizeCzech(str) {
      return str.toLowerCase()
        .replace(/Ã¡/g, 'a').replace(/Ä/g, 'cz').replace(/Ä/g, 'd')
        .replace(/Ã©/g, 'e').replace(/Ä›/g, 'e').replace(/Ã­/g, 'i')
        .replace(/Åˆ/g, 'n').replace(/Ã³/g, 'o').replace(/Å™/g, 'rz')
        .replace(/Å¡/g, 'sz').replace(/Å¥/g, 't').replace(/Ãº/g, 'u')
        .replace(/Å¯/g, 'u').replace(/Ã½/g, 'y').replace(/Å¾/g, 'zz');
    }

    function sortCitations() {
      const input = document.getElementById("input").value;
      const lines = input.split(/\r?\n/).filter(line => line.trim().startsWith("["));

      lines.sort((a, b) => {
        const cleanA = normalizeCzech(a.replace(/^\[\d+\]\s*/, ""));
        const cleanB = normalizeCzech(b.replace(/^\[\d+\]\s*/, ""));
        return cleanA.localeCompare(cleanB);
      });

      const renumbered = lines.map((line, idx) => `[${idx + 1}] ` + line.replace(/^\[\d+\]\s*/, ""));
      document.getElementById("output").value = renumbered.join("\n\n");
    }

    function copyOutput() {
      const out = document.getElementById("output");
      out.select();
      document.execCommand("copy");
    }
  </script>
</body>
</html>
